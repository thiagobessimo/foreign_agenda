{"version":3,"sources":["../../../src/redux/reducers/visited-page.ts"],"names":["createDefault","defaults","Set","add","state","Map","visitedPagesReducer","action","type","client","get","payload","componentChunkName","server"],"mappings":";;;;;AASA;AACA,MAAMA,aAAa,GAAG,MAAgB;AACpC,QAAMC,QAAQ,GAAG,IAAIC,GAAJ,EAAjB;AACAD,EAAAA,QAAQ,CAACE,GAAT,CAAc,mCAAd;AACAF,EAAAA,QAAQ,CAACE,GAAT,CAAc,8BAAd;AAEA,QAAMC,KAAe,GAAG,IAAIC,GAAJ,CAAQ,CAC9B,CAAE,QAAF,EAAW,IAAIH,GAAJ,CAAQD,QAAR,CAAX,CAD8B,EAE9B,CAAE,QAAF,EAAW,IAAIC,GAAJ,CAAQD,QAAR,CAAX,CAF8B,CAAR,CAAxB;AAKA,SAAOG,KAAP;AACD,CAXD;;AAaO,MAAME,mBAAmB,GAAG,CACjCF,KAAmC,GAAGJ,aAAa,EADlB,EAEjCO,MAFiC,KAMA;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAM,cAAN;AACE,aAAOR,aAAa,EAApB;;AAEF,SAAM,4BAAN;AAAmC;AACjC,cAAMS,MAAM,GAAGL,KAAK,CAACM,GAAN,CAAW,QAAX,CAAf;;AACA,YAAID,MAAJ,EAAY;AACVA,UAAAA,MAAM,CAACN,GAAP,CAAWI,MAAM,CAACI,OAAP,CAAeC,kBAA1B;AACD;;AAED,eAAOR,KAAP;AACD;;AAED,SAAM,4BAAN;AAAmC;AACjC,cAAMS,MAAM,GAAGT,KAAK,CAACM,GAAN,CAAW,QAAX,CAAf;;AACA,YAAIG,MAAJ,EAAY;AACVA,UAAAA,MAAM,CAACV,GAAP,CAAWI,MAAM,CAACI,OAAP,CAAeC,kBAA1B;AACD;;AAED,eAAOR,KAAP;AACD;;AAED;AACE,aAAOA,KAAP;AAvBJ;AAyBD,CAhCM","sourcesContent":["import {\n  IGatsbyState,\n  IDeleteCacheAction,\n  ICreateClientVisitedPage,\n  ICreateServerVisitedPage,\n} from \"../types\"\n\ntype StateMap = Map<\"client\" | \"server\", Set<string>>\n\n// The develop server always wants these page components.\nconst createDefault = (): StateMap => {\n  const defaults = new Set<string>()\n  defaults.add(`component---cache-dev-404-page-js`)\n  defaults.add(`component---src-pages-404-js`)\n\n  const state: StateMap = new Map([\n    [`client`, new Set(defaults)],\n    [`server`, new Set(defaults)],\n  ])\n\n  return state\n}\n\nexport const visitedPagesReducer = (\n  state: IGatsbyState[\"visitedPages\"] = createDefault(),\n  action:\n    | IDeleteCacheAction\n    | ICreateClientVisitedPage\n    | ICreateServerVisitedPage\n): IGatsbyState[\"visitedPages\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return createDefault()\n\n    case `CREATE_CLIENT_VISITED_PAGE`: {\n      const client = state.get(`client`)\n      if (client) {\n        client.add(action.payload.componentChunkName)\n      }\n\n      return state\n    }\n\n    case `CREATE_SERVER_VISITED_PAGE`: {\n      const server = state.get(`server`)\n      if (server) {\n        server.add(action.payload.componentChunkName)\n      }\n\n      return state\n    }\n\n    default:\n      return state\n  }\n}\n"],"file":"visited-page.js"}